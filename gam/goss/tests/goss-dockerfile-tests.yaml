# GAM build-time tests
# Tests pinned versions and Dockerfile conventions

file:
  /entrypoint:
    exists: true
    mode: "0755"
    filetype: file

command:
  # Version must match pinned version (7.34.6 displays as 7.34.06)
  gam version:
    exit-status: 0
    stdout:
      - "GAM 7.34"
    timeout: 30000

  # Help output works
  gam --help:
    exit-status: 0
    stdout:
      - "GAM"
    timeout: 10000

  # Verify exact pip package version
  pip show gam7:
    exit-status: 0
    stdout:
      - "Version: 7.34.6"
    timeout: 5000

  # Test entrypoint exec path (arbitrary commands work)
  python --version:
    exit-status: 0
    stdout:
      - "Python 3.13"
    timeout: 5000

  # Network connectivity to Google APIs
  gam checkconnection:
    exit-status: 0
    timeout: 60000
